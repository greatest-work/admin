"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[777],{8818:function(t,e,a){a.r(e),a.d(e,{default:function(){return g}});var l=a(3396),i=a(7139);const o=(0,l.Uk)("编辑"),s=(0,l.Uk)("删除");function n(t,e,a,n,d,u){const r=(0,l.up)("a-range-picker"),m=(0,l.up)("a-tag"),p=(0,l.up)("a-space"),c=(0,l.up)("a-button"),g=(0,l.up)("a-table"),f=(0,l.up)("a-input"),w=(0,l.up)("a-form-item"),b=(0,l.up)("a-select"),k=(0,l.up)("a-input-tag"),v=(0,l.up)("a-form"),h=(0,l.up)("a-modal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(r,{style:{width:"254px",margin:"10px 0 10px 0"}}),(0,l.Wm)(g,{scroll:n.scroll,bordered:!1,loading:n.loading,columns:n.columns,data:n.data.articles,pagination:n.data.pagination,onPageChange:n.getList,onPageSizeChange:n.getList},{status:(0,l.w5)((({record:t})=>[(0,l.Uk)((0,i.zw)(n.RELEASE_STATUS[t.status]),1)])),tag:(0,l.w5)((({record:t})=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.tags.split(","),(t=>((0,l.wg)(),(0,l.j4)(m,{key:t},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(t),1)])),_:2},1024)))),128))])),_:2},1024)])),optional:(0,l.w5)((({record:t})=>[(0,l.Wm)(c,{type:"text",onClick:e=>n.eidtArticle(t)},{default:(0,l.w5)((()=>[o])),_:2},1032,["onClick"]),(0,l.Wm)(c,{type:"text",onClick:e=>n.deleteArticle(t.id),status:"danger"},{default:(0,l.w5)((()=>[s])),_:2},1032,["onClick"])])),_:1},8,["scroll","loading","columns","data","pagination","onPageChange","onPageSizeChange"]),(0,l.Wm)(h,{visible:n.visible,"onUpdate:visible":e[3]||(e[3]=t=>n.visible=t),onOk:n.submitForm,title:"新增站点"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{model:n.data.form},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{field:"title",label:"文章标题"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{modelValue:n.data.form.title,"onUpdate:modelValue":e[0]||(e[0]=t=>n.data.form.title=t)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(w,{field:"siteId",label:"文章所属站点"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{modelValue:n.data.form.siteId,"onUpdate:modelValue":e[1]||(e[1]=t=>n.data.form.siteId=t),options:n.site.list,"field-names":n.siteFieldNames,placeholder:"选择站点","allow-clear":""},null,8,["modelValue","options","field-names"])])),_:1}),(0,l.Wm)(w,{field:"tags",label:"文章标签"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{modelValue:n.data.form.tags,"onUpdate:modelValue":e[2]||(e[2]=t=>n.data.form.tags=t),placeholder:"请选择文章标签","allow-clear":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","onOk"])],64)}var d=a(4870);const u=[{title:"标题",dataIndex:"title",ellipsis:!0,tooltip:!0},{title:"是否发布",width:100,align:"center",slotName:"status"},{title:"标签",slotName:"tag"},{title:"所属站点",dataIndex:"siteInfo.name"},{title:"创建时间",dataIndex:"createTime",ellipsis:!0,tooltip:!0},{title:"更新时间",dataIndex:"updateTime",ellipsis:!0,tooltip:!0},{title:"操作",slotName:"optional",align:"center"}],r=["未发布","已发布","发布中"];var m={name:"article-list",setup(){const t={y:400},{getArticlesList:e,getSiteList:a,updateArticles:i}=(0,l.f3)("api"),o=(0,d.iH)(!0),s=(0,d.iH)(!1),n=(0,d.qj)({articles:[],pagination:{pageSize:10,total:0,"show-total":!0,"show-page-size":!0},form:{title:"",tags:[],siteId:[]}}),m=(0,d.qj)({list:[]}),p={value:"id",label:"name"};(0,l.bv)((async()=>{await c()}));const c=async(t=1)=>{o.value=!0;const a={pageSize:n.pagination.pageSize,page:t},{result:l,total:i}=await e(a);n.articles=l,n.pagination.total=i,o.value=!1},g=async()=>{await i(n.form),await c()},f=async t=>{n.form={...t,tags:t.tags?.split(",")};const{result:e}=await a()??[];m.list=e,s.value=!0},w=async t=>{console.log(t)};return{columns:u,loading:o,data:n,visible:s,scroll:t,site:m,siteFieldNames:p,getList:c,eidtArticle:f,deleteArticle:w,submitForm:g,RELEASE_STATUS:r}}},p=a(89);const c=(0,p.Z)(m,[["render",n]]);var g=c}}]);
//# sourceMappingURL=777.1f3f21cd.js.map