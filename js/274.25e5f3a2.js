"use strict";(self["webpackChunkgreatest_work"]=self["webpackChunkgreatest_work"]||[]).push([[274],{4710:function(e,t,a){a.d(t,{Ec:function(){return o},dg:function(){return n},fb:function(){return d}});const i=()=>[{label:"未发布",value:0,status:"processing"},{label:"已发布",value:1,status:"success"},{label:"发布中",value:2,status:"warning"}],l=()=>[{label:"初始化完成",value:0,status:"processing"},{label:"正常运行中",value:1,status:"success"},{label:"编译中",value:2,status:"warning"}],s=()=>[{label:"未上线",value:0,status:"processing"},{label:"正常运行",value:1,status:"success"},{label:"已下线",value:2,status:"warning"}],n=e=>l().find((t=>t.value===e)),o=e=>i().find((t=>t.value===e)),d=e=>s().find((t=>t.value===e))},4004:function(e,t,a){a.d(t,{PO:function(){return s},zF:function(){return l},Av:function(){return n}});var i={site:"站点",siteName:"站点名称",siteId:"站点 ID",siteStatus:"运行状态",siteTheme:"站点主题",sitePath:"站点根路径",siteLink:"站点链接",siteLogo:"站点 Logo",createTime:"创建时间",updateTime:"更新时间",articleTotal:"文章数量",optional:"操作",friendshipName:"友链名称",friendshipDescText:"友链描述信息",friendshipStatus:"友链状态",friendshipLogo:"友链 Logo",friendshipLink:"友链链接"};const l=[{title:i.siteName,dataIndex:"name",width:180,slotName:"siteInfo",ellipsis:!0},{title:i.siteStatus,dataIndex:"status",slotName:"status",ellipsis:!0,width:180,align:"center"},{title:i.siteLink,dataIndex:"siteLink",slotName:"siteLink",width:180,ellipsis:!0},{title:i.articleTotal,dataIndex:"articleTotal",tooltip:!0,align:"center",width:120,ellipsis:!0},{title:i.createTime,dataIndex:"createTime",tooltip:!0,ellipsis:!0},{title:i.updateTime,dataIndex:"updateTime",tooltip:!0,ellipsis:!0},{title:i.optional,width:240,slotName:"optional",align:"center"}],s=[{key:"logo",type:"img",label:i.siteLogo},{key:"name",type:"text",label:i.siteName},{key:"articleTotal",type:"text",label:i.articleTotal},{key:"status",type:"badge",label:i.siteStatus},{key:"siteLink",type:"link",label:i.siteLink},{key:"path",type:"text",label:i.sitePath},{key:"id",type:"text",label:i.siteId},{key:"createTime",type:"time",label:i.createTime},{key:"updateTime",type:"time",label:i.updateTime}],n=()=>[{title:i.friendshipName,dataIndex:"name",tooltip:!0,ellipsis:!0},{title:i.friendshipLogo,slotName:"logo",ellipsis:!0},{title:i.friendshipStatus,slotName:"status",ellipsis:!0},{title:i.friendshipLink,dataIndex:"link",ellipsis:!0},{title:i.friendshipDescText,dataIndex:"descText",tooltip:!0,ellipsis:!0},{title:i.optional,align:"center",slotName:"optional"}]},274:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var i=a(3396),l=a(7139);const s={class:"layout_main"},n=(0,i.Uk)(" 新增站点 "),o=(0,i.Uk)("构建"),d=(0,i.Uk)("编辑"),u=(0,i.Uk)("删除");function r(e,t,a,r,p,m){const c=(0,i.up)("icon-plus"),f=(0,i.up)("a-button"),k=(0,i.up)("a-space"),g=(0,i.up)("a-link"),b=(0,i.up)("a-badge"),w=(0,i.up)("a-table"),y=(0,i.up)("a-input"),h=(0,i.up)("a-form-item"),v=(0,i.up)("a-form"),S=(0,i.up)("a-modal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",s,[(0,i.Wm)(k,{style:{margin:"10px 0"}},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{onClick:t[0]||(t[0]=e=>r.openModel("add")),type:"primary"},{icon:(0,i.w5)((()=>[(0,i.Wm)(c)])),default:(0,i.w5)((()=>[n])),_:1})])),_:1}),(0,i.Wm)(w,{bordered:!1,loading:r.loading,columns:r.columns,data:r.data.site},{siteInfo:(0,i.w5)((({record:e})=>[(0,i.Wm)(g,{href:"#/site/detail/"+e.id},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.name),1)])),_:2},1032,["href"])])),siteLink:(0,i.w5)((({record:e})=>[(0,i.Wm)(g,{href:e.siteLink,target:"_blank"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.siteLink),1)])),_:2},1032,["href"])])),status:(0,i.w5)((({record:e})=>[(0,i.Wm)(b,{status:r.getSiteStatus(e.status).status,text:r.getSiteStatus(e.status).label},null,8,["status","text"])])),optional:(0,i.w5)((({record:e})=>[(0,i.Wm)(f,{type:"text",onClick:t=>r.startBuildSite(e.id)},{default:(0,i.w5)((()=>[o])),_:2},1032,["onClick"]),(0,i.Wm)(f,{type:"text",onClick:t=>r.editSite(e)},{default:(0,i.w5)((()=>[d])),_:2},1032,["onClick"]),(0,i.Wm)(f,{type:"text",onClick:t=>r.toDeleteSite(e.id),status:"danger"},{default:(0,i.w5)((()=>[u])),_:2},1032,["onClick"])])),_:1},8,["loading","columns","data"])]),(0,i.Wm)(S,{visible:r.visible,"onUpdate:visible":t[4]||(t[4]=e=>r.visible=e),onOk:r.submitForm,title:r.modelTitle()},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{model:r.data.form},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{field:"name",label:"站点名称"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{modelValue:r.data.form.name,"onUpdate:modelValue":t[1]||(t[1]=e=>r.data.form.name=e)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(h,{rules:[{type:"url"}],field:"siteLink",label:"网站地址"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{modelValue:r.data.form.siteLink,"onUpdate:modelValue":t[2]||(t[2]=e=>r.data.form.siteLink=e)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(h,{field:"path",label:"根目录地址"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{modelValue:r.data.form.path,"onUpdate:modelValue":t[3]||(t[3]=e=>r.data.form.path=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","onOk","title"])],64)}var p=a(4870),m=a(4004),c=a(6624),f=a(2483),k=a(9049),g=a(4710),b={name:"site-list",setup(){const e={y:400},t=(0,f.tv)(),{getSiteList:a,buildSite:l,deleteSite:s,updateSite:n,addSite:o}=(0,i.f3)("api"),d=(0,p.iH)(!0),u=(0,p.iH)(!1),r=(0,p.qj)({site:[],pagination:{pageSize:10,total:0},form:{name:"",siteLink:"",path:"",admin:""},type:"add"});(0,i.bv)((async()=>{await h()}));const b=()=>"add"===r.type,w=()=>(b()?"新增":"编辑")+"站点",y=async()=>{b()?await o(r.form):await n(r.form),await h()},h=async(e=1)=>{d.value=!0;const t={pageSize:r.pagination.pageSize,page:e},{items:i,total:l}=await a(t);i.forEach((e=>{e.createTime=(0,k.U)(e.createTime),e.updateTime=(0,k.U)(e.updateTime)})),r.site=i,r.pagination.total=l,d.value=!1},v=async e=>{await l(e),await h()},S=e=>{c.Z.warning({title:"温馨提示",content:"确定删除这个站点吗？继续将无法找回","on-before-ok":async function(t){await s(e),await h(),t()}})},T=e=>{r.form={name:"",siteLink:"",path:"",admin:""},r.type=e,u.value=!0},L=e=>{T("edit"),r.form={...e}},x=e=>{t.push({path:`/site/detail/${e}`})};return{columns:m.zF,loading:d,data:r,getList:h,scroll:e,visible:u,submitForm:y,startBuildSite:v,toDeleteSite:S,editSite:L,modelTitle:w,openModel:T,getSiteInfo:x,getSiteStatus:g.dg}}},w=a(89);const y=(0,w.Z)(b,[["render",r],["__scopeId","data-v-7b07d4a1"]]);var h=y}}]);