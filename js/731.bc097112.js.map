{"version":3,"file":"js/731.bc097112.js","mappings":"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","sources":["webpack://admin/./src/views/article/index.vue","webpack://admin/./src/service/article/config.js","webpack://admin/./src/const/common.js","webpack://admin/./src/views/article/index.vue?8ca6"],"sourcesContent":["<template>\n\n    <a-space style=\"margin: 10px 0;\">\n      <a-range-picker\n        style=\"width: 254px;\"\n      />\n      <a-button @click=\"openModel('add')\" type=\"primary\">\n        <template #icon>\n          <icon-plus />\n        </template>\n        新增文章\n      </a-button>\n  </a-space>\n\n  <a-table\n    :scroll=\"scroll\"\n    :bordered=\"false\"\n    :loading=\"loading\"\n    :columns=\"columns\"\n    :data=\"data.articles\"\n    :pagination=\"data.pagination\"\n    @page-change=\"getList\"\n    @page-size-change=\"getList\"\n  >\n    <template #status={record}>\n      {{ RELEASE_STATUS[record.status] }}\n    </template>\n    <template #tag=\"{ record }\">\n      <!-- {{record.tags}} -->\n        <a-space>\n          <a-tag v-for=\"tag in record.tags.split(',')\" :key=\"tag\">{{tag}}</a-tag>\n        </a-space>\n    </template>\n    <template #optional={record}>\n      <a-button type=\"text\" @click=\"eidtArticle(record)\">编辑</a-button>\n      <a-button type=\"text\" @click=\"deleteArticle(record.id)\" status=\"danger\">删除</a-button>\n    </template>\n  </a-table>\n    <a-modal v-model:visible=\"visible\" @ok=\"submitForm\" title=\"新增站点\">\n    <a-form :model=\"data.form\">\n      <a-form-item field=\"title\" label=\"文章标题\">\n        <a-input v-model=\"data.form.title\" />\n      </a-form-item>\n      <a-form-item field=\"siteId\" label=\"文章所属站点\">\n        <a-select\n          v-model=\"data.form.siteId\" \n          :options=\"site.list\" :field-names=\"siteFieldNames\"\n          placeholder=\"选择站点\" allow-clear>\n        </a-select>\n      </a-form-item>\n      <a-form-item field=\"tags\" label=\"文章标签\">\n        <a-input-tag\n          v-model=\"data.form.tags\"\n          placeholder=\"请选择文章标签\"\n          allow-clear\n        />\n      </a-form-item>\n      <!-- <a-form-item\n        :rules=\"[{ type: 'email' }]\"\n        field=\"admin\"\n        label=\"管理员邮箱\"\n      >\n        <a-input v-model=\"form.admin\" />\n      </a-form-item> -->\n    </a-form>\n  </a-modal>\n</template>\n\n<script>\nimport { reactive, ref, inject, onMounted } from \"vue\";\nimport { columns } from \"@/service/article/config\";\nimport { RELEASE_STATUS } from \"@/const/common\";\nexport default {\n  name: \"article-list\",\n  setup() {\n    const scroll = {\n      y: 400\n    };\n    const { getArticlesList, getSiteList, updateArticles } = inject(\"api\");\n\n    const loading = ref(true);\n    const visible = ref(false)\n    const data = reactive({ \n      articles: [], \n      pagination: { \n        pageSize: 10, \n        total: 0,\n        'show-total': true,\n        'show-page-size': true,\n        // onChange: getList()\n      }, \n      form: {\n        title: '', \n        tags: [], \n        siteId: []\n      }\n    });\n    const site = reactive({list: []})\n    const siteFieldNames = {value: 'id', label: 'name'}\n    onMounted(async () => {\n      await getList()\n    });\n\n    const getList = async (page = 1) => {\n      loading.value = true;\n\n      const prarms = {\n        pageSize: data.pagination.pageSize,\n        page\n      }\n      const { items, total } =  await getArticlesList(prarms);\n      data.articles = items;\n      data.pagination.total = total;\n      loading.value = false;\n    }\n    \n    const submitForm = async () => {\n      await updateArticles(data.form);\n      await getList()\n    }\n    \n    const eidtArticle = async row => {\n      data.form = { ...row, tags: row.tags?.split(',') }\n      const { items } = await getSiteList() ?? [];\n      site.list = items;\n      visible.value = true;\n    }\n\n    const deleteArticle = async id => {\n      console.log(id);\n    }\n    \n    const openModel = type => {\n      console.log(type);\n    }\n\n    return {\n      columns,\n      loading,\n      data,\n      visible,\n      scroll,\n      site,\n      siteFieldNames,\n      RELEASE_STATUS,\n      getList,\n      eidtArticle,\n      deleteArticle,\n      submitForm,\n      openModel,\n    };\n  },\n};\n</script>\n","export const columns = [\n    {\n        title: \"标题\",\n        dataIndex: \"title\",\n        ellipsis: true,\n        tooltip: true,\n    },\n    {\n        title: \"是否发布\",\n        width: 100,\n        align: 'center',\n        slotName: 'status',\n    },\n    {\n        title: \"标签\",\n        slotName: 'tag', \n    },\n    {\n        title: \"所属站点\",\n        dataIndex: \"siteInfo.name\",\n    },\n    {\n        title: \"创建时间\",\n        dataIndex: \"createTime\",\n        ellipsis: true,\n        tooltip: true,\n    },\n    {\n        title: \"更新时间\",\n        dataIndex: \"updateTime\",\n        ellipsis: true,\n        tooltip: true,\n    },\n    {\n        title: '操作',\n        slotName: 'optional',\n        align: 'center'\n    }\n];","const RELEASE_STATUS = ['未发布', '已发布', '发布中'];\n\nexport { RELEASE_STATUS }\n","import { render } from \"./index.vue?vue&type=template&id=08423ea9\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/admin/admin/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createVNode","_component_a_space","style","_component_a_range_picker","_component_a_button","onClick","$setup","type","icon","_component_icon_plus","_component_a_table","scroll","bordered","loading","columns","data","articles","pagination","onPageChange","onPageSizeChange","status","record","tag","_createElementBlock","_Fragment","_renderList","tags","split","_createBlock","_component_a_tag","key","optional","id","_component_a_modal","visible","$event","onOk","title","_component_a_form","model","form","_component_a_form_item","field","label","_component_a_input","_component_a_select","siteId","options","list","placeholder","_component_a_input_tag","dataIndex","ellipsis","tooltip","width","align","slotName","RELEASE_STATUS","name","setup","y","getArticlesList","getSiteList","updateArticles","inject","ref","reactive","pageSize","total","site","siteFieldNames","value","onMounted","async","getList","page","prarms","items","submitForm","eidtArticle","row","deleteArticle","console","log","openModel","__exports__","render"],"sourceRoot":""}