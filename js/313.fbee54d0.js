"use strict";(self["webpackChunkgreatest_work"]=self["webpackChunkgreatest_work"]||[]).push([[313],{4710:function(e,t,a){a.d(t,{Ec:function(){return o},dg:function(){return n},fb:function(){return d}});const i=()=>[{label:"未发布",value:0,status:"processing"},{label:"已发布",value:1,status:"success"},{label:"发布中",value:2,status:"warning"}],l=()=>[{label:"初始化完成",value:0,status:"processing"},{label:"正常运行中",value:1,status:"success"},{label:"编译中",value:2,status:"warning"}],s=()=>[{label:"未上线",value:0,status:"processing"},{label:"正常运行",value:1,status:"success"},{label:"已下线",value:2,status:"warning"}],n=e=>l().find((t=>t.value===e)),o=e=>i().find((t=>t.value===e)),d=e=>s().find((t=>t.value===e))},4004:function(e,t,a){a.d(t,{PO:function(){return s},zF:function(){return l},Av:function(){return n}});var i={site:"站点",siteName:"站点名称",siteId:"站点 ID",siteStatus:"运行状态",siteTheme:"站点主题",sitePath:"站点根路径",siteLink:"站点链接",siteLogo:"站点 Logo",createTime:"创建时间",updateTime:"更新时间",articleTotal:"文章数量",optional:"操作",friendshipName:"友链名称",friendshipDescText:"友链描述信息",friendshipStatus:"友链状态",friendshipLogo:"友链 Logo",friendshipLink:"友链链接"};const l=[{title:i.siteName,dataIndex:"name",width:180,slotName:"siteInfo",ellipsis:!0},{title:i.siteStatus,dataIndex:"status",slotName:"status",ellipsis:!0,width:180,align:"center"},{title:i.siteLink,dataIndex:"siteLink",slotName:"siteLink",width:180,ellipsis:!0},{title:i.articleTotal,dataIndex:"articleTotal",tooltip:!0,align:"center",width:120,ellipsis:!0},{title:i.createTime,dataIndex:"createTime",tooltip:!0,ellipsis:!0},{title:i.updateTime,dataIndex:"updateTime",tooltip:!0,ellipsis:!0},{title:i.optional,width:240,slotName:"optional",align:"center"}],s=[{key:"logo",type:"img",label:i.siteLogo},{key:"name",type:"text",label:i.siteName},{key:"articleTotal",type:"text",label:i.articleTotal},{key:"status",type:"badge",label:i.siteStatus},{key:"siteLink",type:"link",label:i.siteLink},{key:"path",type:"text",label:i.sitePath},{key:"id",type:"text",label:i.siteId},{key:"createTime",type:"time",label:i.createTime},{key:"updateTime",type:"time",label:i.updateTime}],n=()=>[{title:i.friendshipName,dataIndex:"name",tooltip:!0,ellipsis:!0},{title:i.friendshipLogo,slotName:"logo",ellipsis:!0},{title:i.friendshipStatus,slotName:"status",ellipsis:!0},{title:i.friendshipLink,dataIndex:"link",ellipsis:!0},{title:i.friendshipDescText,dataIndex:"descText",tooltip:!0,ellipsis:!0},{title:i.optional,align:"center",slotName:"optional"}]},3313:function(e,t,a){a.r(t),a.d(t,{default:function(){return Y}});var i=a(3396);const l=(0,i.Uk)(" Content of Tab Panel 2 ");function s(e,t,a,s,n,o){const d=(0,i.up)("BaseInfo"),u=(0,i.up)("a-tab-pane"),r=(0,i.up)("Friendship"),p=(0,i.up)("BuildRecord"),c=(0,i.up)("a-tabs"),m=(0,i.up)("a-page-header"),g=(0,i.up)("a-spin");return(0,i.wg)(),(0,i.j4)(g,{loading:s.loading,tip:"加载站点信息中"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onBack:s.back,title:"站点详情",subtitle:s.detail.baseInfo.name},{default:(0,i.w5)((()=>[s.loading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:0,style:{"min-width":"700px"},"default-active-key":"5",position:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{key:"0",title:"基本信息"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{detail:s.detail.baseInfo},null,8,["detail"])])),_:1}),(0,i.Wm)(u,{key:"1",title:"友情链接"},{default:(0,i.w5)((()=>[(0,i.Wm)(r)])),_:1}),(0,i.Wm)(u,{key:"2",title:"评论配置"},{default:(0,i.w5)((()=>[l])),_:1}),(0,i.Wm)(u,{key:"3",title:"主题设置"}),(0,i.Wm)(u,{key:"4",title:"订阅者信息"}),(0,i.Wm)(u,{key:"5",title:"构建记录"},{default:(0,i.w5)((()=>[(0,i.Wm)(p)])),_:1})])),_:1}))])),_:1},8,["onBack","subtitle"])])),_:1},8,["loading"])}var n=a(4870),o=a(2483),d=a(7139);const u={class:"base-info_layout"},r={class:"base-info_label"},p={class:"base-info_value"};function c(e,t,a,l,s,n){const o=(0,i.up)("a-link"),c=(0,i.up)("a-badge"),m=(0,i.up)("a-image"),g=(0,i.up)("a-col"),f=(0,i.up)("a-row");return(0,i.wg)(),(0,i.j4)(f,{gutter:24},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.baseInfoConf,(e=>((0,i.wg)(),(0,i.j4)(g,{span:24,key:e.type+e.label},{default:(0,i.w5)((()=>[(0,i._)("div",u,[(0,i._)("p",r,(0,d.zw)(e.label),1),(0,i._)("p",p,["link"===e.type?((0,i.wg)(),(0,i.j4)(o,{key:0,href:l.baseInfo[e.key]},{default:(0,i.w5)((()=>[(0,i.Uk)((0,d.zw)(l.baseInfo[e.key]),1)])),_:2},1032,["href"])):"badge"===e.type?((0,i.wg)(),(0,i.j4)(c,{key:1,status:l.getSiteStatus(l.baseInfo[e.key]).status,text:l.getSiteStatus(l.baseInfo[e.key]).label},null,8,["status","text"])):"time"===e.type?((0,i.wg)(),(0,i.iD)(i.HY,{key:2},[(0,i.Uk)((0,d.zw)(l.DateType(l.baseInfo[e.key])),1)],64)):"img"===e.type?((0,i.wg)(),(0,i.j4)(m,{key:3,width:"80",src:l.baseInfo[e.key]},null,8,["src"])):((0,i.wg)(),(0,i.iD)(i.HY,{key:4},[(0,i.Uk)((0,d.zw)(l.baseInfo[e.key]),1)],64))])])])),_:2},1024)))),128))])),_:1})}var m=a(4004),g=a(9049),f=a(4710),b={name:"site-base-info",props:{detail:Object},setup(e){const{detail:t}=(0,n.BK)(e),a=(0,n.qj)([]);return{baseInfo:t,data:a,baseInfoConf:m.PO,getSiteStatus:f.dg,DateType:g.U}}},k=a(89);const w=(0,k.Z)(b,[["render",c],["__scopeId","data-v-0027c990"]]);var y=w;const h={class:"layout_main"},v=(0,i.Uk)(" 新增友链 "),I=(0,i.Uk)(" 编辑 "),_=(0,i.Uk)(" 删除 ");function T(e,t,a,l,s,n){const o=(0,i.up)("icon-plus"),d=(0,i.up)("a-button"),u=(0,i.up)("a-badge"),r=(0,i.up)("a-image"),p=(0,i.up)("a-table"),c=(0,i.up)("a-input"),m=(0,i.up)("a-form-item"),g=(0,i.up)("a-form"),f=(0,i.up)("a-modal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",h,[(0,i.Wm)(d,{onClick:t[0]||(t[0]=e=>l.openModel("add")),type:"primary"},{icon:(0,i.w5)((()=>[(0,i.Wm)(o)])),default:(0,i.w5)((()=>[v])),_:1}),(0,i.Wm)(p,{class:"table-el",loading:e.loading,bordered:!1,columns:l.columns,pagination:l.data.pagination,onPageChange:l.getList,data:l.data.list},{status:(0,i.w5)((({record:e})=>[(0,i.Wm)(u,{status:l.getFriendshipStatus(e.status).status,text:l.getFriendshipStatus(e.status).label},null,8,["status","text"])])),logo:(0,i.w5)((({record:e})=>[(0,i.Wm)(r,{height:"40",width:"40",src:e.logo},null,8,["src"])])),optional:(0,i.w5)((({record:e})=>[(0,i.Wm)(d,{type:"text",onClick:t=>l.editFriendship(e)},{default:(0,i.w5)((()=>[I])),_:2},1032,["onClick"]),(0,i.Wm)(d,{type:"text",status:"danger"},{default:(0,i.w5)((()=>[_])),_:1})])),_:1},8,["loading","columns","pagination","onPageChange","data"])]),(0,i.Wm)(f,{visible:l.visible,"onUpdate:visible":t[5]||(t[5]=e=>l.visible=e),onOk:l.submitForm,title:l.modelTitle()},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{rules:l.rules,model:l.data.form},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{field:"name",label:"友链名称"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{modelValue:l.data.form.name,"onUpdate:modelValue":t[1]||(t[1]=e=>l.data.form.name=e)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(m,{field:"link",label:"友链地址"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{modelValue:l.data.form.link,"onUpdate:modelValue":t[2]||(t[2]=e=>l.data.form.link=e)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(m,{field:"logo",label:"Logo"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{modelValue:l.data.form.logo,"onUpdate:modelValue":t[3]||(t[3]=e=>l.data.form.logo=e)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(m,{field:"descText",label:"描述信息"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{modelValue:l.data.form.descText,"onUpdate:modelValue":t[4]||(t[4]=e=>l.data.form.descText=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])])),_:1},8,["visible","onOk","title"])],64)}const W=()=>({name:[{required:!0,message:"友链名称必填"},{minLength:1,message:"友链名称长度不能少于 1 个字符"},{maxLength:10,message:"友链名称长度不能多于 10 个字符"}],link:[{required:!0,message:"友链地址必填"},{type:"url",message:"友链地址必须为 URL 格式"}],logo:[{required:!0,message:"Logo必填"},{type:"url",message:"Logo 必须为 URL 格式"}],descText:[{required:!0,message:"描述信息必填"}]});var L={name:"site-friendship",setup(){const{getFriendshipList:e,addFriendship:t}=(0,i.f3)("api"),a=(0,o.tv)(),{siteId:l}=a.currentRoute.value?.params,s=(0,n.iH)(!1),d=(0,n.iH)(!1);(0,i.bv)((async()=>{await c()}));const u=(0,n.qj)({list:[],pagination:{total:0},form:{},type:"add"}),r=()=>"add"===u.type,p=()=>(r()?"新增":"编辑")+"站点",c=async(t=1)=>{s.value=!0;const a={siteId:l,limit:10,offset:t},{items:i,total:n}=await e(a);u.pagination.total=n,u.list=i,s.value=!1},g=async()=>{const e={...u.form,siteId:l};r()&&await t(e),c()},b=e=>{u.form=e},k=e=>{u.form={name:"",siteLink:"",path:"",admin:""},u.type=e,d.value=!0};return{data:u,getList:c,getFriendshipStatus:f.fb,editFriendship:b,openModel:k,submitForm:g,modelTitle:p,visible:d,rules:W(),columns:(0,m.Av)()}}};const x=(0,k.Z)(L,[["render",T]]);var j=x;const S={key:0,class:"pending"},U=(0,i.Uk)(" Pending "),N={key:1,class:"success"},C=(0,i.Uk)(" Success "),B={class:"record"};function D(e,t,a,l,s,n){const o=(0,i.up)("icon-loading"),u=(0,i.up)("icon-check-circle"),r=(0,i.up)("a-spin"),p=(0,i.up)("a-collapse-item"),c=(0,i.up)("a-collapse");return(0,i.wg)(),(0,i.j4)(c,{"destroy-on-hide":"",accordion:"",bordered:!1,onChange:l.getBuildInfo},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.siteBuild.list,(e=>((0,i.wg)(),(0,i.j4)(p,{header:l.DateType(e.startTime),key:e.id},{extra:(0,i.w5)((()=>[0===e.status?((0,i.wg)(),(0,i.iD)("div",S,[(0,i.Wm)(o),U])):1===e.status?((0,i.wg)(),(0,i.iD)("div",N,[(0,i.Wm)(u),C])):(0,i.kq)("",!0)])),default:(0,i.w5)((()=>[(0,i.Wm)(r,{loading:l.loading},{default:(0,i.w5)((()=>[(0,i._)("pre",B,[(0,i._)("code",null,(0,d.zw)(l.siteBuild.content),1)])])),_:1},8,["loading"])])),_:2},1032,["header"])))),128))])),_:1},8,["onChange"])}var V={name:"build-record",setup(){const{getBuildLogInfo:e,getBuildLogList:t}=(0,i.f3)("api"),a=(0,o.tv)(),{siteId:l}=a.currentRoute.value?.params,s=(0,n.iH)(!1),d=(0,n.qj)({list:[],content:"",status:1,id:""}),u=async()=>{const{items:e}=await t(l,{limit:10,offset:1});d.list=e},r=async t=>{if(s.value=!0,d.content="",!t.length)return;const{content:a,status:i}=await e(t);d.content=a,d.status=i,0===i&&p(),s.value=!1},p=()=>{const e=new EventSource("/api/sse/test",{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJmZjdiNjI2Ni02YjNmLTQwYWItYWE0ZS0wOGE1YjFmOTIzMmMiLCJpYXQiOjE2NjIwNDU2MjEsImV4cCI6MTY2MjEzMjAyMX0.9Ozg0ag0G58H5A3wnWL-N3SpEp2RWCG_4myTtdQTTHM"}});e.onopen=()=>{},e.onmessage=t=>{if("build"===t.data&&u(),"close"===t.data)return e.close(),void(d.list[0].status=1);d.content+=`\n${t.data}`}};return(0,i.bv)((async()=>{p(),await u()})),{siteBuild:d,loading:s,getBuildInfo:r,getBuildList:u,DateType:g.U}}};const F=(0,k.Z)(V,[["render",D],["__scopeId","data-v-1431a536"]]);var z=F,H={name:"site-detail",components:{BaseInfo:y,Friendship:j,BuildRecord:z},setup(){const e=(0,o.tv)(),{getSiteInfo:t}=(0,i.f3)("api"),a=(0,n.iH)(!0);(0,i.bv)((async()=>{await s()}));const l=(0,n.qj)({baseInfo:{}}),s=async()=>{a.value=!0;const{siteId:i}=e.currentRoute.value?.params;l.baseInfo=await t(i),a.value=!1},d=()=>{e.push("/site/list")};return{detail:l,getInfo:s,back:d,loading:a}}};const O=(0,k.Z)(H,[["render",s]]);var Y=O}}]);