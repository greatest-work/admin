"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[731],{731:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var l=a(3396),i=a(7139);const o=(0,l.Uk)(" 新增文章 "),n=(0,l.Uk)("编辑"),s=(0,l.Uk)("删除");function d(e,t,a,d,u,m){const r=(0,l.up)("a-range-picker"),p=(0,l.up)("icon-plus"),c=(0,l.up)("a-button"),g=(0,l.up)("a-space"),f=(0,l.up)("a-tag"),w=(0,l.up)("a-table"),b=(0,l.up)("a-input"),k=(0,l.up)("a-form-item"),W=(0,l.up)("a-select"),v=(0,l.up)("a-input-tag"),_=(0,l.up)("a-form"),h=(0,l.up)("a-modal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(g,{style:{margin:"10px 0"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{style:{width:"254px"}}),(0,l.Wm)(c,{onClick:t[0]||(t[0]=e=>d.openModel("add")),type:"primary"},{icon:(0,l.w5)((()=>[(0,l.Wm)(p)])),default:(0,l.w5)((()=>[o])),_:1})])),_:1}),(0,l.Wm)(w,{scroll:d.scroll,bordered:!1,loading:d.loading,columns:d.columns,data:d.data.articles,pagination:d.data.pagination,onPageChange:d.getList,onPageSizeChange:d.getList},{status:(0,l.w5)((({record:e})=>[(0,l.Uk)((0,i.zw)(d.RELEASE_STATUS[e.status]),1)])),tag:(0,l.w5)((({record:e})=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.tags.split(","),(e=>((0,l.wg)(),(0,l.j4)(f,{key:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e),1)])),_:2},1024)))),128))])),_:2},1024)])),optional:(0,l.w5)((({record:e})=>[(0,l.Wm)(c,{type:"text",onClick:t=>d.eidtArticle(e)},{default:(0,l.w5)((()=>[n])),_:2},1032,["onClick"]),(0,l.Wm)(c,{type:"text",onClick:t=>d.deleteArticle(e.id),status:"danger"},{default:(0,l.w5)((()=>[s])),_:2},1032,["onClick"])])),_:1},8,["scroll","loading","columns","data","pagination","onPageChange","onPageSizeChange"]),(0,l.Wm)(h,{visible:d.visible,"onUpdate:visible":t[4]||(t[4]=e=>d.visible=e),onOk:d.submitForm,title:"新增站点"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{model:d.data.form},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{field:"title",label:"文章标题"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{modelValue:d.data.form.title,"onUpdate:modelValue":t[1]||(t[1]=e=>d.data.form.title=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(k,{field:"siteId",label:"文章所属站点"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{modelValue:d.data.form.siteId,"onUpdate:modelValue":t[2]||(t[2]=e=>d.data.form.siteId=e),options:d.site.list,"field-names":d.siteFieldNames,placeholder:"选择站点","allow-clear":""},null,8,["modelValue","options","field-names"])])),_:1}),(0,l.Wm)(k,{field:"tags",label:"文章标签"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{modelValue:d.data.form.tags,"onUpdate:modelValue":t[3]||(t[3]=e=>d.data.form.tags=e),placeholder:"请选择文章标签","allow-clear":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","onOk"])],64)}var u=a(4870);const m=[{title:"标题",dataIndex:"title",ellipsis:!0,tooltip:!0},{title:"是否发布",width:100,align:"center",slotName:"status"},{title:"标签",slotName:"tag"},{title:"所属站点",dataIndex:"siteInfo.name"},{title:"创建时间",dataIndex:"createTime",ellipsis:!0,tooltip:!0},{title:"更新时间",dataIndex:"updateTime",ellipsis:!0,tooltip:!0},{title:"操作",slotName:"optional",align:"center"}],r=["未发布","已发布","发布中"];var p={name:"article-list",setup(){const e={y:400},{getArticlesList:t,getSiteList:a,updateArticles:i}=(0,l.f3)("api"),o=(0,u.iH)(!0),n=(0,u.iH)(!1),s=(0,u.qj)({articles:[],pagination:{pageSize:10,total:0,"show-total":!0,"show-page-size":!0},form:{title:"",tags:[],siteId:[]}}),d=(0,u.qj)({list:[]}),p={value:"id",label:"name"};(0,l.bv)((async()=>{await c()}));const c=async(e=1)=>{o.value=!0;const a={pageSize:s.pagination.pageSize,page:e},{items:l,total:i}=await t(a);s.articles=l,s.pagination.total=i,o.value=!1},g=async()=>{await i(s.form),await c()},f=async e=>{s.form={...e,tags:e.tags?.split(",")};const{items:t}=await a()??[];d.list=t,n.value=!0},w=async e=>{console.log(e)},b=e=>{console.log(e)};return{columns:m,loading:o,data:s,visible:n,scroll:e,site:d,siteFieldNames:p,RELEASE_STATUS:r,getList:c,eidtArticle:f,deleteArticle:w,submitForm:g,openModel:b}}},c=a(89);const g=(0,c.Z)(p,[["render",d]]);var f=g}}]);
//# sourceMappingURL=731.bc097112.js.map