"use strict";(self["webpackChunkgreatest_work"]=self["webpackChunkgreatest_work"]||[]).push([[927],{4107:function(e,t,a){a.d(t,{Yp:function(){return l},jQ:function(){return n},zF:function(){return i}});const i=[{title:"标题",dataIndex:"title",ellipsis:!0,tooltip:!0},{title:"是否发布",width:100,align:"center",slotName:"status"},{title:"标签",slotName:"tag"},{title:"所属站点",dataIndex:"siteInfo.name"},{title:"创建时间",dataIndex:"createTime",ellipsis:!0,tooltip:!0},{title:"更新时间",dataIndex:"updateTime",ellipsis:!0,tooltip:!0},{title:"操作",slotName:"optional",align:"center"}],n=()=>({title:[{required:!0,message:"标题必填"},{minLength:5,message:"标题长度不能少于 5 个字符"},{maxLength:100,message:"标题长度不能多于 100 个字符"}],siteId:[{required:!0,message:"发布站点必填"}],content:[{required:!0,message:"内容站点必填"},{minLength:20,message:"内容长度不能少于 20 个字符"},{maxLength:2e4,message:"内容长度不能多于 20k 个字符"}],tags:[{required:!0,message:"至少选择一个标签"}],userId:[{required:!0,message:"请选择作者"}]}),l=()=>({siteList:{value:"id",label:"name"},userList:{value:"id",label:"username"}})},8927:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var i=a(3396),n=a(7139);const l={class:"layout_main"},s=(0,i.Uk)(" 新增文章 "),o=(0,i.Uk)("编辑"),r=(0,i.Uk)("删除");function d(e,t,a,d,c,u){const g=(0,i.up)("icon-plus"),p=(0,i.up)("a-button"),m=(0,i.up)("a-space"),w=(0,i.up)("a-tag"),f=(0,i.up)("a-table");return(0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(m,{style:{margin:"10px 0"}},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onClick:t[0]||(t[0]=e=>d.openModel("add")),type:"primary"},{icon:(0,i.w5)((()=>[(0,i.Wm)(g)])),default:(0,i.w5)((()=>[s])),_:1})])),_:1}),(0,i.Wm)(f,{scroll:d.scroll,bordered:!1,loading:d.loading,columns:d.columns,data:d.data.articles,pagination:d.data.pagination,onPageChange:d.getList,onPageSizeChange:d.getList},{status:(0,i.w5)((({record:e})=>[(0,i.Uk)((0,n.zw)(d.RELEASE_STATUS[e.status]),1)])),tag:(0,i.w5)((({record:e})=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.tags.split(","),(e=>((0,i.wg)(),(0,i.j4)(w,{key:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e),1)])),_:2},1024)))),128))])),_:2},1024)])),optional:(0,i.w5)((({record:e})=>[(0,i.Wm)(p,{type:"text",onClick:t=>d.openModel("edit",e.id)},{default:(0,i.w5)((()=>[o])),_:2},1032,["onClick"]),(0,i.Wm)(p,{type:"text",onClick:t=>d.deleteArticle(e.id),status:"danger"},{default:(0,i.w5)((()=>[r])),_:2},1032,["onClick"])])),_:1},8,["scroll","loading","columns","data","pagination","onPageChange","onPageSizeChange"])])}var c=a(4870),u=a(4107);const g=["未发布","已发布","发布中"];var p=a(2483),m=a(9049),w=a(6624),f={name:"article-list",setup(){const e={y:600},{getArticlesList:t,delArticle:a}=(0,i.f3)("api"),n=(0,p.tv)(),l=(0,c.iH)(!0),s=(0,c.qj)({articles:[],pagination:{pageSize:10,total:0,"show-total":!0}}),o=(0,c.qj)({list:[]});(0,i.bv)((async()=>{await r()}));const r=async(e=1)=>{l.value=!0;const a={pageSize:s.pagination.pageSize,page:e},{items:i,total:n}=await t(a);i.forEach((e=>{e.createTime=(0,m.U)(e.createTime),e.updateTime=(0,m.U)(e.updateTime)})),s.articles=i,s.pagination.total=n,l.value=!1},d=async e=>{w.Z.warning({title:"温馨提示",content:"确定删除这篇文章吗？继续将无法找回","on-before-ok":async function(t){await a(e),await r(),t()}})},f=(e,t)=>{console.log(e),n.push({path:"/article/edit",query:{type:e,id:t}})};return{columns:u.zF,loading:l,data:s,scroll:e,site:o,RELEASE_STATUS:g,getList:r,deleteArticle:d,openModel:f}}},k=a(89);const h=(0,k.Z)(f,[["render",d],["__scopeId","data-v-4ad3e806"]]);var y=h}}]);