{"version":3,"file":"js/207.8ee82349.js","mappings":"qLAKiB,U,WAYa,S,WAG6B,U,WAKI,M,WACT,M,WACuB,M,qTA1B3EA,EAAAA,EAAAA,IAOUC,EAAA,CAPDC,MAAA,0BAA8B,C,kBACrC,IAKW,EALXF,EAAAA,EAAAA,IAKWG,EAAA,CALAC,QAAK,eAAEC,EAAAA,UAAS,QAASC,KAAK,WAAzC,CACaC,MAAI,SACb,IAAa,EAAbP,EAAAA,EAAAA,IAAaQ,M,kBACJ,IAEb,M,gBAEFR,EAAAA,EAAAA,IAoBUS,EAAA,CAnBPC,UAAU,EACVC,QAASN,EAAAA,QACTO,QAASP,EAAAA,QACTQ,KAAMR,EAAAA,KAAKS,MAJd,CAMaC,QAAM,SACb,EADiBC,YAAM,CACO,IAAbA,EAAOD,SAAM,WAA9BE,EAAAA,EAAAA,IAEWC,EAAAA,GAAA,CAAAC,IAAAA,GAAA,EADTnB,EAAAA,EAAAA,IAAoBoB,EAAA,CAANC,KAAA,KACL,GAFX,kBAGAJ,EAAAA,EAAAA,IAEWC,EAAAA,GAAA,CAAAC,IAAAA,GAAA,EADTnB,EAAAA,EAAAA,IAAiDsB,EAAA,CAA7BpB,MAAO,CAAAqB,MAAAA,aAClB,GAFX,QAKOC,UAAQ,SACjB,EADmBR,YAAM,EACzBhB,EAAAA,EAAAA,IAAsEG,EAAA,CAA5DG,KAAK,OAAQF,QAAK,GAAEC,EAAAA,eAAeW,EAAOS,KAApD,C,kBAAyD,IAAE,M,KAA3D,mBACAzB,EAAAA,EAAAA,IAA6DG,EAAA,CAAnDG,KAAK,OAAQF,QAAK,GAAEC,EAAAA,SAASW,IAAvC,C,kBAAgD,IAAE,M,KAAlD,mBACAhB,EAAAA,EAAAA,IAAoFG,EAAA,CAA1EG,KAAK,OAAQF,QAAK,GAAEC,EAAAA,aAAaW,EAAOS,IAAKV,OAAO,UAA9D,C,kBAAuE,IAAE,M,KAAzE,qB,KAlBJ,iCAqBAf,EAAAA,EAAAA,IA4BU0B,EAAA,CA5BOC,QAAStB,EAAAA,Q,kCAAAA,EAAAA,QAAOuB,GAAGC,KAAIxB,EAAAA,WAAayB,MAAOzB,EAAAA,cAA5D,C,kBACE,IA0BS,EA1BTL,EAAAA,EAAAA,IA0BS+B,EAAA,CA1BAC,MAAO3B,EAAAA,KAAK4B,MAArB,C,kBACE,IAEc,EAFdjC,EAAAA,EAAAA,IAEckC,EAAA,CAFDC,MAAM,OAAOC,MAAM,QAAhC,C,kBACE,IAAoC,EAApCpC,EAAAA,EAAAA,IAAoCqC,EAAA,C,WAAlBhC,EAAAA,KAAK4B,KAAKK,K,qCAAVjC,EAAAA,KAAK4B,KAAKK,KAAIV,IAAhC,0B,OAEF5B,EAAAA,EAAAA,IAIckC,EAAA,CAHbK,MAAO,CAAC,CAADjC,KAAAA,QACP6B,MAAM,WAAWC,MAAM,QAFxB,C,kBAGE,IAAwC,EAAxCpC,EAAAA,EAAAA,IAAwCqC,EAAA,C,WAAtBhC,EAAAA,KAAK4B,KAAKO,S,qCAAVnC,EAAAA,KAAK4B,KAAKO,SAAQZ,IAApC,0B,OAEF5B,EAAAA,EAAAA,IAEckC,EAAA,CAFDC,MAAM,OAAOC,MAAM,SAAhC,C,kBACE,IAAoC,EAApCpC,EAAAA,EAAAA,IAAoCqC,EAAA,C,WAAlBhC,EAAAA,KAAK4B,KAAKQ,K,qCAAVpC,EAAAA,KAAK4B,KAAKQ,KAAIb,IAAhC,0B,OASF5B,EAAAA,EAAAA,IAMckC,EAAA,CALXK,MAAO,CAAC,CAADjC,KAAAA,UACR6B,MAAM,QACNC,MAAM,SAHR,C,kBAKE,IAAqC,EAArCpC,EAAAA,EAAAA,IAAqCqC,EAAA,C,WAAnBhC,EAAAA,KAAK4B,KAAKS,M,qCAAVrC,EAAAA,KAAK4B,KAAKS,MAAKd,IAAjC,0B,cAxBJ,gB,KADF,kC,eC9BK,MAAMhB,EAAU,CACnB,CACIkB,MAAO,OACPa,UAAW,OACXC,UAAU,EACVC,SAAS,GAEb,CACIf,MAAO,OACPa,UAAW,WACXE,SAAS,EACTD,UAAU,GAEd,CACId,MAAO,QACPa,UAAW,OACXE,SAAS,EACTD,UAAU,GAEd,CACId,MAAO,UACPa,UAAW,eACXE,SAAS,EACTC,MAAO,QACPF,UAAU,GAEd,CACId,MAAO,KACPa,UAAW,SACXI,SAAU,SACVH,UAAU,EACVE,MAAO,UAEX,CACIhB,MAAO,OACPa,UAAW,aACXE,SAAS,EACTD,UAAU,GAEd,CACId,MAAO,OACPa,UAAW,aACXE,SAAS,EACTD,UAAU,GAEd,CACId,MAAO,KACPkB,MAAO,IACPD,SAAU,WACVD,MAAO,W,cDiBf,GACER,KAAM,YAENW,QAEE,MAAMC,EAAS,CACbC,EAAG,MAEC,YAAEC,EAAF,UAAeC,EAAf,WAA0BC,EAA1B,WAAsCC,EAAtC,QAAkDC,IAAYC,EAAAA,EAAAA,IAAO,OAErE9C,GAAU+C,EAAAA,EAAAA,KAAI,GACd/B,GAAU+B,EAAAA,EAAAA,KAAI,GACd7C,GAAO8C,EAAAA,EAAAA,IAAS,CACpB7C,KAAM,GACN8C,WAAY,CACVC,SAAU,GACVC,MAAO,GAET7B,KAAM,CACJK,KAAM,GACNE,SAAU,GACVC,KAAM,GACNC,MAAO,IAETpC,KAAM,SAGRyD,EAAAA,EAAAA,KAAUC,gBACFC,GAAN,IAEF,MAAMC,EAAQ,IAAoB,QAAdrD,EAAKP,KACnB6D,EAAa,KAASD,IAAU,KAAO,MAAnB,KAEpBE,EAAaJ,UACjBE,UAAgBV,EAAQ3C,EAAKoB,YAAcsB,EAAW1C,EAAKoB,YACrDgC,GAAN,EAEIA,EAAUD,MAAOK,EAAO,KAC5B1D,EAAQ2D,OAAQ,EAChB,MAAMC,EAAS,CACbV,SAAUhD,EAAK+C,WAAWC,SAC1BQ,SAEI,OAAEG,EAAF,MAAUV,SAAiBV,EAAYmB,GAC7C1D,EAAKC,KAAO0D,EACZ3D,EAAK+C,WAAWE,MAAQA,EACxBnD,EAAQ2D,OAAQ,CAAhB,EAGIG,EAAiBT,gBACfX,EAAU5B,SACVwC,GAAN,EAGIS,EAAejD,IACnBkD,EAAAA,EAAAA,QAAc,CACZ7C,MAAO,OACP8C,QAAS,oBACT,eAAgBZ,eAAgBa,SACxBvB,EAAW7B,SACXwC,IACNY,GACF,GAPF,EAWIC,EAAYxE,IAChBO,EAAKoB,KAAO,CACVK,KAAM,WACNE,SAAU,oBACVC,KAAM,oBACNC,MAAO,IAET7B,EAAKP,KAAOA,EACZqB,EAAQ2C,OAAQ,CAAhB,EAGIS,EAAWC,IACfF,EAAU,QACVjE,EAAKoB,KAAO,IAAK+C,EAAjB,EAGF,MAAO,CACLpE,QADK,EAELD,UACAE,OACAoD,UACAf,SACAvB,UACAyC,aACAK,iBACAC,eACAK,WACAZ,aACAW,YAEH,G,QE7JH,MAAMG,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://admin/./src/views/site/index.vue","webpack://admin/./src/service/site/config.js","webpack://admin/./src/views/site/index.vue?3cb7"],"sourcesContent":["<template>\n  <a-space style=\"margin: 10px 0 10px 0;\">\n    <a-button @click=\"openModel('add')\" type=\"primary\">\n      <template #icon>\n        <icon-plus />\n      </template>\n      新增站点\n    </a-button>\n  </a-space>\n  <a-table\n    :bordered=\"false\"\n    :loading=\"loading\"\n    :columns=\"columns\"\n    :data=\"data.site\"\n  >\n    <template #status=\"{ record }\">\n        <template  v-if=\"record.status === 0\">\n          <icon-refresh spin/> 编译中\n        </template>\n        <template v-else>\n          <icon-check-circle :style=\"{color: '#00b52b'}\" /> 正常运行\n        </template>\n    </template>\n\n    <template #optional={record}>\n      <a-button type=\"text\" @click=\"startBuildSite(record.id)\">构建</a-button>\n      <a-button type=\"text\" @click=\"editSite(record)\">编辑</a-button>\n      <a-button type=\"text\" @click=\"toDeleteSite(record.id)\" status=\"danger\">删除</a-button>\n    </template>\n  </a-table>\n  <a-modal v-model:visible=\"visible\" @ok=\"submitForm\" :title=\"modelTitle()\">\n    <a-form :model=\"data.form\">\n      <a-form-item field=\"name\" label=\"站点名称\">\n        <a-input v-model=\"data.form.name\" />\n      </a-form-item>\n      <a-form-item \n      :rules=\"[{ type: 'url' }]\"\n       field=\"siteLink\" label=\"网站地址\">\n        <a-input v-model=\"data.form.siteLink\" />\n      </a-form-item>\n      <a-form-item field=\"path\" label=\"根目录地址\">\n        <a-input v-model=\"data.form.path\" />\n      </a-form-item>\n      <!-- <a-form-item field=\"tag\" label=\"站点标签\">\n        <a-input-tag\n          v-model=\"data.form.tag\"\n          placeholder=\"Please Enter\"\n          allow-clear\n        />\n      </a-form-item> -->\n      <a-form-item\n        :rules=\"[{ type: 'email' }]\"\n        field=\"admin\"\n        label=\"管理员邮箱\"\n      >\n        <a-input v-model=\"data.form.admin\" />\n      </a-form-item>\n    </a-form>\n  </a-modal>\n</template>\n\n<script>\nimport { reactive, ref, inject, onMounted } from \"vue\";\nimport { columns } from \"@/service/site/config\";\nimport { Modal } from '@arco-design/web-vue';\n\nexport default {\n  name: \"site-list\",\n\n  setup() {\n\n    const scroll = {\n      y: 400\n    };\n    const { getSiteList, buildSite, deleteSite, updateSite, addSite } = inject(\"api\");\n\n    const loading = ref(true);\n    const visible = ref(false)\n    const data = reactive({ \n      site: [], \n      pagination: { \n        pageSize: 10, \n        total: 0 \n      },\n      form: {\n        name: \"\",\n        siteLink: \"\",\n        path: \"\",\n        admin: \"\"\n      },\n      type: 'add'\n    });\n\n    onMounted(async () => {\n      await getList()\n    });\n    const isAdd = () => data.type === 'add';\n    const modelTitle = () => `${isAdd() ? '新增' : '编辑' }站点`\n\n    const submitForm = async () => {\n      isAdd() ? await addSite(data.form) : await updateSite(data.form);\n      await getList();\n    }\n    const getList = async (page = 1) => {\n      loading.value = true;\n      const prarms = {\n        pageSize: data.pagination.pageSize,\n        page\n      }\n      const { result, total } =  await getSiteList(prarms);\n      data.site = result;\n      data.pagination.total = total;\n      loading.value = false;\n    }\n\n    const startBuildSite = async id => {\n      await buildSite(id);\n      await getList()\n    }\n\n    const toDeleteSite = id => {\n      Modal.warning({\n        title: '温馨提示',\n        content: '确定删除这个站点吗？继续将无法找回',\n        'on-before-ok': async function (done) {\n          await deleteSite(id);\n          await getList();\n          done();\n        }\n      });\n    };\n    \n    const openModel = type => {\n      data.form = {\n        name: \"test_yjh\",\n        siteLink: \"https://baidu.com\",\n        path: \"/www/wwwroot/test\",\n        admin: \"\"\n      }\n      data.type = type\n      visible.value = true;\n    }\n\n    const editSite = row => {\n      openModel('edit');\n      data.form = { ...row };\n    }\n\n    return {\n      columns,\n      loading,\n      data,\n      getList,\n      scroll,\n      visible,\n      submitForm,\n      startBuildSite,\n      toDeleteSite,\n      editSite,\n      modelTitle,\n      openModel\n    };\n  },\n};\n</script>\n","export const columns = [\n    {\n        title: \"站点名称\",\n        dataIndex: \"name\",\n        ellipsis: true,\n        tooltip: true,\n    },\n    {\n        title: \"站点地址\",\n        dataIndex: \"siteLink\",\n        tooltip: true,\n        ellipsis: true\n    },\n    {\n        title: \"站点根路径\",\n        dataIndex: \"path\",\n        tooltip: true,\n        ellipsis: true\n    },\n    {\n        title: \"文章数量（篇）\",\n        dataIndex: \"articleTotal\",\n        tooltip: true,\n        align: 'right',\n        ellipsis: true\n    },\n    {\n        title: \"状态\",\n        dataIndex: \"status\",\n        slotName: \"status\",\n        ellipsis: true,\n        align: 'center'\n    },\n    {\n        title: \"创建时间\",\n        dataIndex: \"createTime\",\n        tooltip: true,\n        ellipsis: true,\n    },\n    {\n        title: \"更新时间\",\n        dataIndex: \"updateTime\",\n        tooltip: true,\n        ellipsis: true\n    },\n    {\n        title: '操作',\n        width: 240,\n        slotName: 'optional',\n        align: 'center'\n    }\n];","import { render } from \"./index.vue?vue&type=template&id=5c0df164\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/admin/admin/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createVNode","_component_a_space","style","_component_a_button","onClick","$setup","type","icon","_component_icon_plus","_component_a_table","bordered","loading","columns","data","site","status","record","_createElementBlock","_Fragment","key","_component_icon_refresh","spin","_component_icon_check_circle","color","optional","id","_component_a_modal","visible","$event","onOk","title","_component_a_form","model","form","_component_a_form_item","field","label","_component_a_input","name","rules","siteLink","path","admin","dataIndex","ellipsis","tooltip","align","slotName","width","setup","scroll","y","getSiteList","buildSite","deleteSite","updateSite","addSite","inject","ref","reactive","pagination","pageSize","total","onMounted","async","getList","isAdd","modelTitle","submitForm","page","value","prarms","result","startBuildSite","toDeleteSite","Modal","content","done","openModel","editSite","row","__exports__","render"],"sourceRoot":""}