"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[419],{2419:function(t,e,a){a.r(e),a.d(e,{default:function(){return g}});var i=a(3396);const l=(0,i.Uk)(" 新增站点 "),o=(0,i.Uk)(" 编译中 "),n=(0,i.Uk)(" 正常运行 "),d=(0,i.Uk)("构建"),m=(0,i.Uk)("编辑"),s=(0,i.Uk)("删除");function u(t,e,a,u,p,r){const c=(0,i.up)("icon-plus"),f=(0,i.up)("a-button"),w=(0,i.up)("a-space"),k=(0,i.up)("icon-refresh"),g=(0,i.up)("icon-check-circle"),b=(0,i.up)("a-table"),y=(0,i.up)("a-input"),W=(0,i.up)("a-form-item"),v=(0,i.up)("a-form"),S=(0,i.up)("a-modal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(w,{style:{margin:"10px 0"}},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{onClick:e[0]||(e[0]=t=>u.openModel("add")),type:"primary"},{icon:(0,i.w5)((()=>[(0,i.Wm)(c)])),default:(0,i.w5)((()=>[l])),_:1})])),_:1}),(0,i.Wm)(b,{bordered:!1,loading:u.loading,columns:u.columns,data:u.data.site},{status:(0,i.w5)((({record:t})=>[0===t.status?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Wm)(k,{spin:""}),o],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Wm)(g,{style:{color:"#00b52b"}}),n],64))])),optional:(0,i.w5)((({record:t})=>[(0,i.Wm)(f,{type:"text",onClick:e=>u.startBuildSite(t.id)},{default:(0,i.w5)((()=>[d])),_:2},1032,["onClick"]),(0,i.Wm)(f,{type:"text",onClick:e=>u.editSite(t)},{default:(0,i.w5)((()=>[m])),_:2},1032,["onClick"]),(0,i.Wm)(f,{type:"text",onClick:e=>u.toDeleteSite(t.id),status:"danger"},{default:(0,i.w5)((()=>[s])),_:2},1032,["onClick"])])),_:1},8,["loading","columns","data"]),(0,i.Wm)(S,{visible:u.visible,"onUpdate:visible":e[5]||(e[5]=t=>u.visible=t),onOk:u.submitForm,title:u.modelTitle()},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{model:u.data.form},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{field:"name",label:"站点名称"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{modelValue:u.data.form.name,"onUpdate:modelValue":e[1]||(e[1]=t=>u.data.form.name=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(W,{rules:[{type:"url"}],field:"siteLink",label:"网站地址"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{modelValue:u.data.form.siteLink,"onUpdate:modelValue":e[2]||(e[2]=t=>u.data.form.siteLink=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(W,{field:"path",label:"根目录地址"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{modelValue:u.data.form.path,"onUpdate:modelValue":e[3]||(e[3]=t=>u.data.form.path=t)},null,8,["modelValue"])])),_:1}),(0,i.Wm)(W,{rules:[{type:"email"}],field:"admin",label:"管理员邮箱"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{modelValue:u.data.form.admin,"onUpdate:modelValue":e[4]||(e[4]=t=>u.data.form.admin=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","onOk","title"])],64)}var p=a(4870);const r=[{title:"站点名称",dataIndex:"name",ellipsis:!0,tooltip:!0},{title:"站点地址",dataIndex:"siteLink",tooltip:!0,ellipsis:!0},{title:"站点根路径",dataIndex:"path",tooltip:!0,ellipsis:!0},{title:"文章数量（篇）",dataIndex:"articleTotal",tooltip:!0,align:"right",ellipsis:!0},{title:"状态",dataIndex:"status",slotName:"status",ellipsis:!0,align:"center"},{title:"创建时间",dataIndex:"createTime",tooltip:!0,ellipsis:!0},{title:"更新时间",dataIndex:"updateTime",tooltip:!0,ellipsis:!0},{title:"操作",width:240,slotName:"optional",align:"center"}];var c=a(6624),f={name:"site-list",setup(){const t={y:400},{getSiteList:e,buildSite:a,deleteSite:l,updateSite:o,addSite:n}=(0,i.f3)("api"),d=(0,p.iH)(!0),m=(0,p.iH)(!1),s=(0,p.qj)({site:[],pagination:{pageSize:10,total:0},form:{name:"",siteLink:"",path:"",admin:""},type:"add"});(0,i.bv)((async()=>{await k()}));const u=()=>"add"===s.type,f=()=>(u()?"新增":"编辑")+"站点",w=async()=>{u()?await n(s.form):await o(s.form),await k()},k=async(t=1)=>{d.value=!0;const a={pageSize:s.pagination.pageSize,page:t},{items:i,total:l}=await e(a);s.site=i,s.pagination.total=l,d.value=!1},g=async t=>{await a(t),await k()},b=t=>{c.Z.warning({title:"温馨提示",content:"确定删除这个站点吗？继续将无法找回","on-before-ok":async function(e){await l(t),await k(),e()}})},y=t=>{s.form={name:"",siteLink:"",path:"",admin:""},s.type=t,m.value=!0},W=t=>{y("edit"),s.form={...t}};return{columns:r,loading:d,data:s,getList:k,scroll:t,visible:m,submitForm:w,startBuildSite:g,toDeleteSite:b,editSite:W,modelTitle:f,openModel:y}}},w=a(89);const k=(0,w.Z)(f,[["render",u]]);var g=k}}]);
//# sourceMappingURL=419.4b1b4968.js.map