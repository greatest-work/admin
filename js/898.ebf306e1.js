"use strict";(self["webpackChunkgreatest_work"]=self["webpackChunkgreatest_work"]||[]).push([[898],{4710:function(e,t,a){a.d(t,{Ec:function(){return u},dg:function(){return i},fb:function(){return o}});const s=()=>[{label:"未发布",value:0,status:"processing"},{label:"已发布",value:1,status:"success"},{label:"发布中",value:2,status:"warning"}],l=()=>[{label:"初始化完成",value:0,status:"processing"},{label:"正常运行中",value:1,status:"success"},{label:"编译中",value:2,status:"warning"}],n=()=>[{label:"未上线",value:0,status:"processing"},{label:"正常运行",value:1,status:"success"},{label:"已下线",value:2,status:"warning"}],i=e=>l().find((t=>t.value===e)),u=e=>s().find((t=>t.value===e)),o=e=>n().find((t=>t.value===e))},4107:function(e,t,a){a.d(t,{Yp:function(){return n},jQ:function(){return l},zF:function(){return s}});const s=[{title:"标题",dataIndex:"title",ellipsis:!0,tooltip:!0},{title:"是否发布",width:100,align:"center",slotName:"status"},{title:"标签",slotName:"tag"},{title:"所属站点",dataIndex:"siteInfo.name"},{title:"创建时间",dataIndex:"createTime",ellipsis:!0,tooltip:!0},{title:"更新时间",dataIndex:"updateTime",ellipsis:!0,tooltip:!0},{title:"操作",slotName:"optional",align:"center"}],l=()=>({title:[{required:!0,message:"标题必填"},{minLength:5,message:"标题长度不能少于 5 个字符"},{maxLength:100,message:"标题长度不能多于 100 个字符"}],siteId:[{required:!0,message:"发布站点必填"}],content:[{required:!0,message:"内容站点必填"},{minLength:20,message:"内容长度不能少于 20 个字符"},{maxLength:2e4,message:"内容长度不能多于 20k 个字符"}],tags:[{required:!0,message:"至少选择一个标签"}],userId:[{required:!0,message:"请选择作者"}]}),n=()=>({siteList:{value:"id",label:"name"},userList:{value:"id",label:"username"}})},898:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var s=a(3396),l=a(7139);const n={class:"layout_main"},i=(0,s.Uk)(" 新增文章 "),u=(0,s.Uk)("编辑"),o=(0,s.Uk)("删除");function r(e,t,a,r,c,d){const g=(0,s.up)("icon-plus"),p=(0,s.up)("a-button"),m=(0,s.up)("a-space"),f=(0,s.up)("a-badge"),w=(0,s.up)("a-tag"),v=(0,s.up)("a-table");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(m,{style:{margin:"10px 0"}},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{onClick:t[0]||(t[0]=e=>r.openModel("add")),type:"primary"},{icon:(0,s.w5)((()=>[(0,s.Wm)(g)])),default:(0,s.w5)((()=>[i])),_:1})])),_:1}),(0,s.Wm)(v,{scroll:r.scroll,bordered:!1,loading:r.loading,columns:r.columns,data:r.data.articles,pagination:r.data.pagination,onPageChange:r.getList,onPageSizeChange:r.getList},{status:(0,s.w5)((({record:e})=>[(0,s.Wm)(f,{status:r.getArticleStatus(e.status).status,text:r.getArticleStatus(e.status).label},null,8,["status","text"])])),tag:(0,s.w5)((({record:e})=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.tags.split(","),(e=>((0,s.wg)(),(0,s.j4)(w,{key:e},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e),1)])),_:2},1024)))),128))])),_:2},1024)])),optional:(0,s.w5)((({record:e})=>[(0,s.Wm)(p,{type:"text",onClick:t=>r.openModel("edit",e.id)},{default:(0,s.w5)((()=>[u])),_:2},1032,["onClick"]),(0,s.Wm)(p,{type:"text",onClick:t=>r.deleteArticle(e.id),status:"danger"},{default:(0,s.w5)((()=>[o])),_:2},1032,["onClick"])])),_:1},8,["scroll","loading","columns","data","pagination","onPageChange","onPageSizeChange"])])}var c=a(4870),d=a(4107),g=a(4710),p=a(2483),m=a(9049),f=a(6624),w={name:"article-list",setup(){const e={y:600},{getArticlesList:t,delArticle:a}=(0,s.f3)("api"),l=(0,p.tv)(),n=(0,c.iH)(!0),i=(0,c.qj)({articles:[],pagination:{pageSize:10,total:0,"show-total":!0}}),u=(0,c.qj)({list:[]});(0,s.bv)((async()=>{await o()}));const o=async(e=1)=>{n.value=!0;const a={pageSize:i.pagination.pageSize,page:e},{items:s,total:l}=await t(a);s.forEach((e=>{e.createTime=(0,m.U)(e.createTime),e.updateTime=(0,m.U)(e.updateTime)})),i.articles=s,i.pagination.total=l,n.value=!1},r=async e=>{f.Z.warning({title:"温馨提示",content:"确定删除这篇文章吗？继续将无法找回","on-before-ok":async function(t){await a(e),await o(),t()}})},w=(e,t)=>{console.log(e),l.push({path:"/article/edit",query:{type:e,id:t}})};return{columns:d.zF,loading:n,data:i,scroll:e,site:u,getArticleStatus:g.Ec,getList:o,deleteArticle:r,openModel:w}}},v=a(89);const b=(0,v.Z)(w,[["render",r],["__scopeId","data-v-f31d1002"]]);var k=b}}]);