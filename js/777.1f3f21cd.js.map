{"version":3,"file":"js/777.1f3f21cd.js","mappings":"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","sources":["webpack://admin/./src/views/article/index.vue","webpack://admin/./src/service/article/config.js","webpack://admin/./src/const/common.js","webpack://admin/./src/views/article/index.vue?8ca6"],"sourcesContent":["<template>\n  <a-range-picker\n    style=\"width: 254px; margin: 10px 0 10px 0;\"\n  />\n  <a-table\n    :scroll=\"scroll\"\n    :bordered=\"false\"\n    :loading=\"loading\"\n    :columns=\"columns\"\n    :data=\"data.articles\"\n    :pagination=\"data.pagination\"\n    @page-change=\"getList\"\n    @page-size-change=\"getList\"\n  >\n    <template #status={record}>\n      {{ RELEASE_STATUS[record.status] }}\n    </template>\n    <template #tag=\"{ record }\">\n      <!-- {{record.tags}} -->\n        <a-space>\n          <a-tag v-for=\"tag in record.tags.split(',')\" :key=\"tag\">{{tag}}</a-tag>\n        </a-space>\n    </template>\n    <template #optional={record}>\n      <a-button type=\"text\" @click=\"eidtArticle(record)\">编辑</a-button>\n      <a-button type=\"text\" @click=\"deleteArticle(record.id)\" status=\"danger\">删除</a-button>\n    </template>\n  </a-table>\n    <a-modal v-model:visible=\"visible\" @ok=\"submitForm\" title=\"新增站点\">\n    <a-form :model=\"data.form\">\n      <a-form-item field=\"title\" label=\"文章标题\">\n        <a-input v-model=\"data.form.title\" />\n      </a-form-item>\n      <a-form-item field=\"siteId\" label=\"文章所属站点\">\n        <a-select\n          v-model=\"data.form.siteId\" \n          :options=\"site.list\" :field-names=\"siteFieldNames\"\n          placeholder=\"选择站点\" allow-clear>\n        </a-select>\n      </a-form-item>\n      <a-form-item field=\"tags\" label=\"文章标签\">\n        <a-input-tag\n          v-model=\"data.form.tags\"\n          placeholder=\"请选择文章标签\"\n          allow-clear\n        />\n      </a-form-item>\n      <!-- <a-form-item\n        :rules=\"[{ type: 'email' }]\"\n        field=\"admin\"\n        label=\"管理员邮箱\"\n      >\n        <a-input v-model=\"form.admin\" />\n      </a-form-item> -->\n    </a-form>\n  </a-modal>\n</template>\n\n<script>\nimport { reactive, ref, inject, onMounted } from \"vue\";\nimport { columns } from \"@/service/article/config\";\nimport { RELEASE_STATUS } from \"@/const/common\";\nexport default {\n  name: \"article-list\",\n  setup() {\n    const scroll = {\n      y: 400\n    };\n    const { getArticlesList, getSiteList, updateArticles } = inject(\"api\");\n\n    const loading = ref(true);\n    const visible = ref(false)\n    const data = reactive({ \n      articles: [], \n      pagination: { \n        pageSize: 10, \n        total: 0,\n        'show-total': true,\n        'show-page-size': true,\n        // onChange: getList()\n      }, \n      form: {\n        title: '', \n        tags: [], \n        siteId: []\n      }\n    });\n    const site = reactive({list: []})\n    const siteFieldNames = {value: 'id', label: 'name'}\n    onMounted(async () => {\n      await getList()\n    });\n\n    const getList = async (page = 1) => {\n      loading.value = true;\n\n      const prarms = {\n        pageSize: data.pagination.pageSize,\n        page\n      }\n      const { result, total } =  await getArticlesList(prarms);\n      data.articles = result;\n      data.pagination.total = total;\n      loading.value = false;\n    }\n    \n    const submitForm = async () => {\n      await updateArticles(data.form);\n      await getList()\n    }\n    \n    const eidtArticle = async row => {\n      data.form = { ...row, tags: row.tags?.split(',') }\n      const { result } = await getSiteList() ?? [];\n      site.list = result;\n      visible.value = true;\n    }\n\n    const deleteArticle = async id => {\n      console.log(id);\n    }\n\n    return {\n      columns,\n      loading,\n      data,\n      visible,\n      scroll,\n      site,\n      siteFieldNames,\n      getList,\n      eidtArticle,\n      deleteArticle,\n      submitForm,\n      RELEASE_STATUS\n    };\n  },\n};\n</script>\n","export const columns = [\n    {\n        title: \"标题\",\n        dataIndex: \"title\",\n        ellipsis: true,\n        tooltip: true,\n    },\n    {\n        title: \"是否发布\",\n        width: 100,\n        align: 'center',\n        slotName: 'status',\n    },\n    {\n        title: \"标签\",\n        slotName: 'tag', \n    },\n    {\n        title: \"所属站点\",\n        dataIndex: \"siteInfo.name\",\n    },\n    {\n        title: \"创建时间\",\n        dataIndex: \"createTime\",\n        ellipsis: true,\n        tooltip: true,\n    },\n    {\n        title: \"更新时间\",\n        dataIndex: \"updateTime\",\n        ellipsis: true,\n        tooltip: true,\n    },\n    {\n        title: '操作',\n        slotName: 'optional',\n        align: 'center'\n    }\n];","const RELEASE_STATUS = ['未发布', '已发布', '发布中'];\n\nexport { RELEASE_STATUS }\n","import { render } from \"./index.vue?vue&type=template&id=76ac8214\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/runner/work/admin/admin/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createVNode","_component_a_range_picker","style","_component_a_table","scroll","$setup","bordered","loading","columns","data","articles","pagination","onPageChange","onPageSizeChange","status","record","tag","_component_a_space","_createElementBlock","_Fragment","_renderList","tags","split","_createBlock","_component_a_tag","key","optional","_component_a_button","type","onClick","id","_component_a_modal","visible","$event","onOk","title","_component_a_form","model","form","_component_a_form_item","field","label","_component_a_input","_component_a_select","siteId","options","list","placeholder","_component_a_input_tag","dataIndex","ellipsis","tooltip","width","align","slotName","RELEASE_STATUS","name","setup","y","getArticlesList","getSiteList","updateArticles","inject","ref","reactive","pageSize","total","site","siteFieldNames","value","onMounted","async","getList","page","prarms","result","submitForm","eidtArticle","row","deleteArticle","console","log","__exports__","render"],"sourceRoot":""}